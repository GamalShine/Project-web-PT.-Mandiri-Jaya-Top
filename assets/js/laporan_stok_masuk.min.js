// Inisialisasi DataTable untuk laporan stok masuk
let laporan_stok_masuk = $("#laporan_stok_masuk").DataTable({
    responsive: !0,
    scrollX: !0,
    ajax: laporanUrl, // URL untuk mengambil data laporan stok masuk
    columnDefs: [{
        searcable: !1,
        orderable: !1,
        targets: 0
    }], // Konfigurasi kolom
    order: [[1, "asc"]], // Urutan awal berdasarkan kolom tanggal secara ascending
    columns: [{
        data: null
    }, {
        data: "tanggal"
    }, {
        data: "barcode"
    }, {
        data: "nama_produk"
    }, {
        data: "jumlah"
    }, {
        data: "keterangan"
    }, {
        data: "supplier"
    }] // Definisi kolom data
});

// Fungsi untuk me-reload tabel laporan stok masuk
function reloadTable() {
    laporan_stok_masuk.ajax.reload();
}

// Fungsi untuk menghapus data dengan konfirmasi pengguna
function remove(a) {
    Swal.fire({
        title: "Hapus",
        text: "Hapus data ini?",
        type: "warning",
        showCancelButton: !0
    }).then(() => {
        // Mengirimkan permintaan AJAX untuk menghapus data
        $.ajax({
            url: deleteUrl, // URL untuk menghapus data
            type: "post",
            dataType: "json",
            data: { id: a }, // ID data yang akan dihapus
            success: () => {
                Swal.fire("Sukses", "Sukses Menghapus Data", "success");
                reloadTable(); // Me-reload tabel setelah menghapus data
            },
            error: (a) => {
                console.log(a); // Menampilkan pesan kesalahan dalam konsol jika terjadi kesalahan
            }
        });
    });
}

// Event handler untuk mengatur nomor urut setelah pengurutan atau pencarian
laporan_stok_masuk.on("order.dt search.dt", () => {
    laporan_stok_masuk.column(0, { search: "applied", order: "applied" }).nodes().each((a, e) => {
        a.innerHTML = e + 1;
    });
});

// Event handler saat modal ditutup, mengosongkan formulir dan reset validasi
$(".modal").on("hidden.bs.modal", () => {
    $("#form")[0].reset();
    $("#form").validate().resetForm();
});
