function getDays() {
    let currentDate = new Date();
    let currentMonth = currentDate.getMonth() + 1;
    let currentYear = currentDate.getFullYear();
    let lastDayOfMonth = new Date(currentYear, currentMonth, 0).getDate();
    let daysArray = [];
    for (let i = 1; i <= lastDayOfMonth; i++) {
        daysArray.push(i);
    }
    return daysArray;
}

$.ajax({
    url: transaksi_hariUrl,
    type: "get",
    dataType: "json",
    success: data => {
        $("#transaksi_hari").html(data.total);
    }
});

$.ajax({
    url: transaksi_terakhirUrl,
    type: "get",
    dataType: "json",
    success: data => {
        $("#transaksi_terakhir").html(data);
    }
});

$.ajax({
    url: stok_hariUrl,
    type: "get",
    dataType: "json",
    success: data => {
        $("#stok_hari").html(data.total);
    }
});

$.ajax({
    url: produk_terlarisUrl,
    type: "get",
    dataType: "json",
    success: data => {
        var ctx = $("#produkTerlaris").get(0).getContext("2d");
        new Chart(ctx, {
            type: "pie",
            data: {
                labels: data.label,
                datasets: [{
                    backgroundColor: ["#f56954", "#00a65a", "#f39c12", "#00c0ef", "#3c8dbc", "#d2d6de"],
                    data: data.data
                }]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true
            }
        });
    }
});

$.ajax({
    url: data_stokUrl,
    type: "get",
    dataType: "json",
    success: data => {
        $.each(data, (index, item) => {
            let listItem = `<li class="list-group-item">
                ${item.nama_produk}
                <span class="float-right">${item.stok}</span>
            </li>`;
            $("#stok_produk").append(listItem);
        });
    }
});

$.ajax({
    url: penjualan_bulanUrl,
    type: "post",
    data: { day: getDays() },
    dataType: "json",
    success: data => {
        var ctx = $("#bulanIni").get(0).getContext("2d");
        new Chart(ctx, {
            type: "bar",
            data: {
                labels: getDays(),
                datasets: [{
                    label: "Total",
                    backgroundColor: "rgba(60,141,188,0.9)",
                    borderColor: "rgba(60,141,188,0.8)",
                    pointRadius: false,
                    pointColor: "#3b8bba",
                    pointStrokeColor: "rgba(60,141,188,1)",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(60,141,188,1)",
                    data: data
                }]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true,
                legend: {
                    display: false
                },
                scales: {
                    xAxes: [{
                        gridLines: {
                            display: false
                        }
                    }],
                    yAxes: [{
                        gridLines: {
                            display: false
                        }
                    }]
                }
            }
        });
    },
    error: err => {
        console.log(err);
    }
});
